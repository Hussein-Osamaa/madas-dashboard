// Initialize Firebase Plans and Features
// Run this script once to set up your plans in Firestore

import { initializeApp } from 'firebase/app';
import { getFirestore, collection, doc, setDoc } from 'firebase/firestore';

// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyC-ls1TrvSkrw71KqmB_kHYgPoj0H550a8",
    authDomain: "madas-store.firebaseapp.com",
    projectId: "madas-store",
    storageBucket: "madas-store.firebasestorage.app",
    messagingSenderId: "527071300010",
    appId: "1:527071300010:web:70470e2204065b4590583d3"
};

const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// Define Plans
const plans = [
    {
        planId: 'basic',
        name: 'Basic',
        displayName: 'Basic Plan',
        description: 'Perfect for small businesses just getting started',
        pricing: {
            monthly: 29,
            yearly: 290,
            currency: 'USD',
            trialDays: 14
        },
        features: [
            'pos',
            'inventory',
            'orders',
            'customers',
            'analytics',
            'reports'
        ],
        limits: {
            maxStaff: 5,
            maxProducts: 500,
            maxOrders: -1,
            maxStorage: 1, // GB
            maxApiCalls: 1000,
            maxLocations: 1
        },
        isPopular: false,
        order: 1,
        isActive: true,
        metadata: {
            createdAt: new Date().toISOString()
        }
    },
    {
        planId: 'professional',
        name: 'Professional',
        displayName: 'Professional Plan',
        description: 'Perfect for growing businesses',
        pricing: {
            monthly: 79,
            yearly: 790,
            currency: 'USD',
            trialDays: 14
        },
        features: [
            'pos',
            'inventory',
            'orders',
            'customers',
            'analytics',
            'reports',
            'advanced_reports',
            'gamification',
            'loyalty',
            'madas_pass',
            'reviews',
            'collections',
            'customer_wallet'
        ],
        limits: {
            maxStaff: 10,
            maxProducts: 1000,
            maxOrders: -1,
            maxStorage: 5, // GB
            maxApiCalls: 10000,
            maxLocations: 3
        },
        isPopular: true,
        order: 2,
        isActive: true,
        metadata: {
            createdAt: new Date().toISOString()
        }
    },
    {
        planId: 'enterprise',
        name: 'Enterprise',
        displayName: 'Enterprise Plan',
        description: 'For large businesses with advanced needs',
        pricing: {
            monthly: 199,
            yearly: 1990,
            currency: 'USD',
            trialDays: 30
        },
        features: [
            'pos',
            'inventory',
            'orders',
            'customers',
            'analytics',
            'reports',
            'advanced_reports',
            'insights',
            'gamification',
            'loyalty',
            'madas_pass',
            'reviews',
            'collections',
            'customer_wallet',
            'website_builder',
            'api_access',
            'custom_domain',
            'multi_location',
            'shares_management'
        ],
        limits: {
            maxStaff: -1, // unlimited
            maxProducts: -1,
            maxOrders: -1,
            maxStorage: 50, // GB
            maxApiCalls: 100000,
            maxLocations: -1
        },
        isPopular: false,
        order: 3,
        isActive: true,
        metadata: {
            createdAt: new Date().toISOString()
        }
    }
];

// Define Features
const features = [
    // Core Features
    { featureId: 'pos', name: 'Point of Sale', category: 'core', icon: 'ğŸ›’' },
    { featureId: 'inventory', name: 'Inventory Management', category: 'core', icon: 'ğŸ“¦' },
    { featureId: 'orders', name: 'Order Management', category: 'core', icon: 'ğŸ“‹' },
    { featureId: 'customers', name: 'Customer Management', category: 'core', icon: 'ğŸ‘¥' },
    
    // Analytics
    { featureId: 'analytics', name: 'Basic Analytics', category: 'analytics', icon: 'ğŸ“Š' },
    { featureId: 'reports', name: 'Reports', category: 'analytics', icon: 'ğŸ“ˆ' },
    { featureId: 'advanced_reports', name: 'Advanced Reports', category: 'analytics', icon: 'ğŸ“Š' },
    { featureId: 'insights', name: 'Advanced Insights', category: 'analytics', icon: 'ğŸ”®' },
    
    // Engagement
    { featureId: 'gamification', name: 'Gamification Hub', category: 'engagement', icon: 'ğŸ®' },
    { featureId: 'loyalty', name: 'Loyalty Program', category: 'engagement', icon: 'ğŸ’' },
    { featureId: 'madas_pass', name: 'MADAS Pass', category: 'engagement', icon: 'ğŸ«' },
    { featureId: 'reviews', name: 'Product Reviews', category: 'engagement', icon: 'â­' },
    { featureId: 'collections', name: 'Product Collections', category: 'engagement', icon: 'ğŸ“¦' },
    { featureId: 'customer_wallet', name: 'Customer Wallet', category: 'engagement', icon: 'ğŸ’°' },
    
    // Advanced
    { featureId: 'website_builder', name: 'Website Builder', category: 'advanced', icon: 'ğŸŒ' },
    { featureId: 'api_access', name: 'API Access', category: 'advanced', icon: 'ğŸ”Œ' },
    { featureId: 'custom_domain', name: 'Custom Domain', category: 'advanced', icon: 'ğŸŒ' },
    { featureId: 'multi_location', name: 'Multi-Location', category: 'advanced', icon: 'ğŸ“' },
    { featureId: 'shares_management', name: 'Shares Management', category: 'advanced', icon: 'ğŸ’¼' }
];

// Initialize function
async function initializePlansAndFeatures() {
    console.log('Initializing plans and features...');
    
    try {
        // Add plans
        for (const plan of plans) {
            await setDoc(doc(db, 'plans', plan.planId), plan);
            console.log(`âœ“ Created plan: ${plan.name}`);
        }
        
        // Add features
        for (const feature of features) {
            await setDoc(doc(db, 'features', feature.featureId), feature);
            console.log(`âœ“ Created feature: ${feature.name}`);
        }
        
        console.log('\nâœ… All plans and features initialized successfully!');
        console.log('\nYou can now:');
        console.log('1. Open admin-enhanced.html');
        console.log('2. Create businesses and assign plans');
        console.log('3. Customize features per business');
        
    } catch (error) {
        console.error('Error initializing:', error);
    }
}

// Run initialization
initializePlansAndFeatures();

