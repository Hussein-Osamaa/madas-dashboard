<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Reviews - MADAS Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="icon" type="image/x-icon" href="/assets/img/madas-logo.png">
    <!-- Firebase Permission Checker -->
    <script type="module" src="../../js/firebase-permission-check.js"></script>
    <style>
        :root {
            --madas-primary: #27491F;
            --madas-dark: #F0CAE1;
            --madas-light: #F4F4F4;
            --madas-accent: #FFD300;
            --bg-main: #F4F4F4;
            --text-main: #1F2937;
            --text-secondary: #6B7280;
            --card-bg: #FFFFFF;
            --card-border: #E5E7EB;
            --sidebar-bg: #FFFFFF;
            --header-bg: #FFFFFF;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-main) !important;
            color: var(--text-main) !important;
            transition: background 0.5s, color 0.5s;
        }

        /* Dark mode styles */
        body.dark-mode {
            --madas-primary: #FFD700;
            --madas-dark: #232946;
            --madas-light: #181825;
            --madas-accent: #7209b7;
            --bg-main: #181825;
            --text-main: #F8F8F2;
            --text-secondary: #A8A8A8;
            --card-bg: #232946;
            --card-border: #2D3748;
            --sidebar-bg: #232946;
            --header-bg: #232946;
        }

        .dark-toggle {
            background: var(--madas-accent);
            border: 2px solid var(--madas-primary);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .dark-toggle svg {
            width: 20px;
            height: 20px;
            fill: var(--madas-primary);
            transition: fill 0.3s;
        }

        .dark-toggle:hover {
            transform: scale(1.05);
            box-shadow: 0 2px 8px rgba(255, 215, 0, 0.3);
        }

        .dark-toggle:active {
            transform: scale(0.95);
        }

        /* Transition all elements */
        * {
            transition: background-color 0.5s, color 0.5s, border-color 0.5s;
        }

        /* Override specific backgrounds */
        .bg-white {
            background-color: var(--card-bg) !important;
        }

        .bg-gray-50 {
            background-color: var(--bg-main) !important;
        }

        .text-gray-900 {
            color: var(--text-main) !important;
        }

        .text-gray-600 {
            color: var(--text-secondary) !important;
        }

        /* Enhanced Sidebar Link Styles */
        .sidebar-link {
            position: relative;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
        }

        /* Override Tailwind text color classes */
        .sidebar-link.text-gray-700,
        .sidebar-link.text-gray-600 {
            color: var(--text-main) !important;
        }

        body.dark-mode .sidebar-link.text-gray-700,
        body.dark-mode .sidebar-link.text-gray-600 {
            color: var(--text-main) !important;
        }



        .sidebar-link:hover {
            transform: translateX(6px) scale(1.02);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            background: var(--madas-light);
        }

        .sidebar-link:active {
            transform: translateX(3px) scale(0.98);
            transition: all 0.1s ease;
        }.finance-dropdown-menu.show {
            display: block;
            animation: slideDown 0.3s ease;
            background: white !important;
            border: 1px solid #e5e7eb !important;
            border-radius: 8px !important;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06) !important;
            margin: 8px 0 !important;
            padding: 8px 0 !important;
        }

        .review-text {
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .review-expanded {
            display: block;
            -webkit-line-clamp: unset;
        }

        /* Unified Dropdown Menu Styling - No 3D Effects */
        .inventory-submenu,
        .finance-dropdown-menu,
        .ecommerce-dropdown-menu {
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        /* Unified Dropdown Items - Same as Main Navigation */
        .inventory-submenu .sidebar-link,
        .finance-dropdown-menu .sidebar-link,
        .ecommerce-dropdown-menu .sidebar-link {
            padding: 10px 14px !important;
            margin: 0 !important;
            border-radius: 0 !important;
            transition: all 0.2s ease !important;
        }

        .inventory-submenu .sidebar-link:hover,
        .finance-dropdown-menu .sidebar-link:hover,
        .ecommerce-dropdown-menu .sidebar-link:hover {
            background: var(--madas-light) !important;
            color: var(--madas-primary) !important;
        }

        /* Ensure dropdown hover maintains color in dark mode */
        body.dark-mode .inventory-submenu .sidebar-link:hover,
        body.dark-mode .finance-dropdown-menu .sidebar-link:hover,
        body.dark-mode .ecommerce-dropdown-menu .sidebar-link:hover {
            color: var(--madas-primary) !important;
        }


        /* Ensure all dropdown text sizes are uniform */
        .inventory-submenu .sidebar-link span,
        .finance-dropdown-menu .sidebar-link span,
        .ecommerce-dropdown-menu .sidebar-link span {
            font-size: 0.8rem !important;
        }

        /* Make dropdown icons smaller */
        .inventory-submenu .material-icons,
        .finance-dropdown-menu .material-icons,
        .ecommerce-dropdown-menu .material-icons {
            font-size: 18px !important;
        }

        /* Unified Dropdown Items Active State - EXACT Same as Main Navigation */
        .inventory-submenu .sidebar-link.active,
        .finance-dropdown-menu .sidebar-link.active,
        .ecommerce-dropdown-menu .sidebar-link.active {
            background: var(--madas-light) !important;
            color: var(--madas-primary) !important;
            font-weight: 600 !important;
        }

        .inventory-submenu .sidebar-link.active .material-icons,
        .finance-dropdown-menu .sidebar-link.active .material-icons,
        .ecommerce-dropdown-menu .sidebar-link.active .material-icons {
            color: var(--madas-primary) !important;
        }

        /* Unified Dropdown Button Styling */
        .inventory-dropdown button,
        .finance-dropdown button,
        .ecommerce-dropdown button {
            background: transparent !important;
            border: none !important;
            padding: 10px 14px !important;
            border-radius: 8px !important;
            transition: all 0.2s ease !important;
            width: 100% !important;
            text-align: left !important;
        }

        .inventory-dropdown button:hover,
        .finance-dropdown button:hover,
        .ecommerce-dropdown button:hover {
            background: var(--madas-light) !important;
        }

        /* Unified Dropdown Arrow */
        .dropdown-arrow {
            transition: transform 0.2s ease !important;
        }

        .dropdown-arrow.rotate {
            transform: rotate(180deg) !important;
        }

        /* Unified Visible States for Dropdowns - No 3D Effects */
        .inventory-submenu:not(.hidden) {
            opacity: 1 !important;
            transform: translateY(0) !important;
            pointer-events: auto !important;
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .finance-dropdown-menu.show {
            display: block !important;
            animation: slideDown 0.3s ease !important;
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }

        .ecommerce-dropdown-menu.show {
            display: block !important;
            animation: slideDown 0.3s ease !important;
            background: transparent !important;
            border: none !important;
            border-radius: 0 !important;
            box-shadow: none !important;
            margin: 0 !important;
            padding: 0 !important;
        }
    </style>
</head>

<body>
    <div class="flex h-screen bg-gray-50">
        <!-- Sidebar -->
        <div class="w-64 bg-white shadow-lg flex flex-col">
            <!-- Logo -->
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center space-x-3">
                    <img src="/dashboard/assets/img/madas-logo.png" alt="MADAS" class="w-8 h-8">
                    <h1 class="text-xl font-bold text-[var(--madas-primary)]">MADAS</h1>
                </div>
            </div>

            <!-- Navigation -->
            <nav class="flex-1 px-4 py-6 space-y-2 overflow-y-auto">
                <a href="/pages/Admin.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">dashboard</span>
                    <span>Dashboard</span>
                </a>
                <a href="/pages/Orders/orders.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">receipt_long</span>
                    <span>Orders</span>
                </a>
                <!-- Inventory Dropdown -->
                <div class="inventory-dropdown">
                    <button
                        class="sidebar-link flex items-center justify-between w-full px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all"
                        id="inventory-toggle">
                        <div class="flex items-center space-x-3">
                            <span class="material-icons">inventory_2</span>
                            <span>Inventory</span>
                        </div>
                        <span class="material-icons transition-transform duration-200"
                            id="inventory-arrow">expand_more</span>
                    </button>
                    <div class="inventory-submenu hidden ml-6 mt-2 space-y-1" id="inventory-submenu">
                        <a href="/pages/Inventory/products.html"
                            class="sidebar-link submenu-link flex items-center space-x-3 px-4 py-2 rounded-lg text-gray-600 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                            <span class="material-icons text-lg">inventory</span>
                            <span>Products</span>
                        </a>
                        <a href="/pages/Inventory/collections.html"
                            class="sidebar-link submenu-link flex items-center space-x-3 px-4 py-2 rounded-lg text-gray-600 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                            <span class="material-icons text-lg">collections</span>
                            <span>Collections</span>
                        </a>
                        <a href="/pages/Inventory/product-reviews.html"
                            class="sidebar-link submenu-link flex items-center space-x-3 px-4 py-2 rounded-lg text-[var(--madas-primary)] hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all bg-[var(--madas-light)]">
                            <span class="material-icons text-lg">rate_review</span>
                            <span>Reviews</span>
                        </a>
                        <a href="/pages/Inventory/low-stock.html"
                            class="sidebar-link submenu-link flex items-center space-x-3 px-4 py-2 rounded-lg text-gray-600 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                            <span class="material-icons text-lg">warning</span>
                            <span>Low Stock</span>
                        </a>
                    </div>
                </div>
                <a href="/pages/Customers/Customer.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">group</span>
                    <span>Customers</span>
                </a>
                <a href="/pages/Finance/finance.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">account_balance_wallet</span>
                    <span>Finance</span>
                </a>
                <a href="/pages/Finance/reports.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">assessment</span>
                    <span>Reports</span>
                </a>
                <a href="/pages/Finance/analytics.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">analytics</span>
                    <span>Analytics</span>
                </a>
                <a href="./profile.html"
                    class="sidebar-link flex items-center space-x-3 px-4 py-3 rounded-xl text-gray-700 hover:bg-[var(--madas-light)] hover:text-[var(--madas-primary)] transition-all">
                    <span class="material-icons">person</span>
                    <span>Profile</span>
                </a>
            </nav>

            <!-- Dark Mode Toggle -->
            <div class="p-4 border-t border-gray-200">
                <button class="dark-toggle" id="darkToggle">
                    <svg id="darkToggleIcon" viewBox="0 0 24 24" width="20" height="20">
                        <path
                            d="M12 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1zm5.657 3.343a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414zM21 11a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1zm-2.929 7.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM12 20a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm-7.071-2.929a1 1 0 0 1-1.414 0l-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 0 1 0 1.414zM4 13a1 1 0 1 1 0-2H3a1 1 0 1 1 0 2h1zm2.343-7.657a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 4.222 6.05l.707-.707a1 1 0 0 1 1.414 0zM12 6a6 6 0 1 1 0 12A6 6 0 0 1 12 6z" />
                    </svg>
                </button>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 flex flex-col overflow-hidden">
            <!-- Header -->
            <!-- Header -->
            <header class="bg-white shadow-sm border-b border-gray-200 fixed top-0 left-0 right-0 z-40 h-16">
                <div class="flex items-center justify-between h-full px-4 lg:px-6">
                    <div class="flex items-center space-x-4">
                        <button id="menu-toggle"
                            class="lg:hidden text-[var(--madas-primary)] p-2 rounded-lg hover:bg-gray-100">
                            <span class="material-icons">menu</span>
                        </button>
                        <div class="flex items-center space-x-3">
                            <div class="w-8 h-8 bg-[var(--madas-primary)] rounded-lg flex items-center justify-center">
                                <span class="text-white font-bold text-sm">M</span>
                            </div>
                            <div>
                                <h1 id="business-name" class="text-xl font-bold text-[var(--madas-primary)]">Loading...
                                </h1>
                                <button id="plan-badge" onclick="window.location.href='/pages/settings.html#plans'"
                                    class="text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors cursor-pointer">
                                    Loading Plan...
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="flex items-center space-x-4">
                        <div class="hidden md:flex items-center space-x-2 text-sm text-gray-600">
                            <span class="material-icons text-[var(--madas-primary)]">notifications</span>
                            <span class="bg-red-500 text-white text-xs rounded-full px-2 py-1">3</span>
                        </div>
                        <div class="flex items-center space-x-3">
                            <!-- Dark mode toggle button -->
                            <button class="dark-toggle" id="darkToggle" title="Toggle dark mode">
                                <svg id="darkToggleIcon" viewBox="0 0 24 24">
                                    <path
                                        d="M12 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1zm5.657 3.343a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414zM21 11a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1zm-2.929 7.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM12 20a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm-7.071-2.929a1 1 0 0 1-1.414 0l-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 0 1 0 1.414zM4 13a1 1 0 1 1 0-2H3a1 1 0 1 1 0 2h1zm2.343-7.657a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 4.222 6.05l.707-.707a1 1 0 0 1 1.414 0zM12 6a6 6 0 1 1 0 12A6 6 0 0 1 12 6z" />
                                </svg>
                            </button>
                            <div class="hidden md:block text-right">
                                <p id="user-name" class="text-sm font-medium text-gray-900">Loading...</p>
                                <p id="user-email" class="text-xs text-gray-500">loading@example.com</p>
                            </div>
                            <button id="profile-btn"
                                class="w-8 h-8 bg-[var(--madas-accent)] rounded-full flex items-center justify-center hover:bg-yellow-400 transition-colors cursor-pointer">
                                <span class="text-[var(--madas-primary)] font-bold text-sm" id="user-initial">U</span>
                            </button>
                            <button id="logout-btn"
                                class="text-gray-500 hover:text-[var(--madas-primary)] p-2 rounded-lg hover:bg-gray-100">
                                <span class="material-icons">logout</span>
                            </button>
                        </div>
                    </div>
                </div>
            </header>

            <!-- Content -->
            <main class="flex-1 overflow-auto p-6">
                <!-- Filters and Search -->
                <div class="bg-white rounded-lg shadow-sm border border-gray-200 p-4 mb-6">
                    <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between space-y-4 lg:space-y-0">
                        <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4">
                            <div class="relative">
                                <span
                                    class="material-icons absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400">search</span>
                                <input type="text" placeholder="Search reviews..."
                                    class="search-input pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--madas-primary)] focus:border-transparent w-full sm:w-64">
                            </div>
                            <select
                                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--madas-primary)] focus:border-transparent">
                                <option value="">All Ratings</option>
                                <option value="5">5 Stars</option>
                                <option value="4">4 Stars</option>
                                <option value="3">3 Stars</option>
                                <option value="2">2 Stars</option>
                                <option value="1">1 Star</option>
                            </select>
                            <select
                                class="px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[var(--madas-primary)] focus:border-transparent">
                                <option value="">All Status</option>
                                <option value="published">Published</option>
                                <option value="pending">Pending</option>
                                <option value="hidden">Hidden</option>
                            </select>
                        </div>
                        <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-600">156 reviews</span>
                            <div class="flex space-x-1">
                                <button
                                    class="p-2 rounded-lg border border-gray-300 bg-[var(--madas-primary)] text-white"
                                    title="List View">
                                    <span class="material-icons">list</span>
                                </button>
                                <button class="p-2 rounded-lg border border-gray-300 hover:bg-gray-50"
                                    title="Grid View">
                                    <span class="material-icons text-gray-600">grid_view</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Reviews List -->
                <div class="space-y-4">
                    <!-- Review Card 1 -->
                    <div class="review-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center">
                                    <span class="text-white font-semibold text-lg">JS</span>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-semibold text-gray-900">John Smith</h4>
                                        <div class="flex items-center space-x-1">
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                        </div>
                                        <span class="rating-badge rating-excellent">5.0</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-badge status-published">Published</span>
                                        <span class="text-sm text-gray-500">2 days ago</span>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">Wireless Bluetooth Headphones</p>
                                <p class="review-text text-gray-600 mb-4">Excellent sound quality and very comfortable
                                    to wear for long periods. The battery life is amazing and the noise cancellation
                                    works perfectly. Highly recommend this product!</p>
                                <div class="flex items-center space-x-4 text-sm text-gray-500">
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">thumb_up</span>
                                        <span>12 helpful</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">reply</span>
                                        <span>Reply</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">flag</span>
                                        <span>Report</span>
                                    </span>
                                </div>
                            </div>
                            <div class="flex-shrink-0 flex space-x-2">
                                <button
                                    class="p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                    title="Approve">
                                    <span class="material-icons">check</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors"
                                    title="Edit">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                                    title="Hide">
                                    <span class="material-icons">visibility_off</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Review Card 2 -->
                    <div class="review-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-pink-500 to-red-600 rounded-full flex items-center justify-center">
                                    <span class="text-white font-semibold text-lg">MJ</span>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-semibold text-gray-900">Maria Johnson</h4>
                                        <div class="flex items-center space-x-1">
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-empty text-sm">star</span>
                                        </div>
                                        <span class="rating-badge rating-good">4.0</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-badge status-pending">Pending</span>
                                        <span class="text-sm text-gray-500">1 day ago</span>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">Smart Fitness Tracker</p>
                                <p class="review-text text-gray-600 mb-4">Good overall product with accurate heart rate
                                    monitoring and step counting. The app interface could be improved and the battery
                                    life is shorter than expected.</p>
                                <div class="flex items-center space-x-4 text-sm text-gray-500">
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">thumb_up</span>
                                        <span>8 helpful</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">reply</span>
                                        <span>Reply</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">flag</span>
                                        <span>Report</span>
                                    </span>
                                </div>
                            </div>
                            <div class="flex-shrink-0 flex space-x-2">
                                <button
                                    class="p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                    title="Approve">
                                    <span class="material-icons">check</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors"
                                    title="Edit">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                                    title="Hide">
                                    <span class="material-icons">visibility_off</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Review Card 3 -->
                    <div class="review-card bg-white rounded-lg shadow-sm border border-gray-200 p-6">
                        <div class="flex items-start space-x-4">
                            <div class="flex-shrink-0">
                                <div
                                    class="w-12 h-12 bg-gradient-to-r from-green-500 to-teal-600 rounded-full flex items-center justify-center">
                                    <span class="text-white font-semibold text-lg">DW</span>
                                </div>
                            </div>
                            <div class="flex-1 min-w-0">
                                <div class="flex items-center justify-between mb-2">
                                    <div class="flex items-center space-x-3">
                                        <h4 class="font-semibold text-gray-900">David Wilson</h4>
                                        <div class="flex items-center space-x-1">
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-rating text-sm">star</span>
                                            <span class="material-icons star-empty text-sm">star</span>
                                            <span class="material-icons star-empty text-sm">star</span>
                                            <span class="material-icons star-empty text-sm">star</span>
                                        </div>
                                        <span class="rating-badge rating-poor">2.0</span>
                                    </div>
                                    <div class="flex items-center space-x-2">
                                        <span class="status-badge status-hidden">Hidden</span>
                                        <span class="text-sm text-gray-500">3 days ago</span>
                                    </div>
                                </div>
                                <p class="text-gray-900 font-medium mb-2">Portable Phone Charger</p>
                                <p class="review-text text-gray-600 mb-4">Disappointed with this purchase. The charger
                                    stopped working after just one week and the customer service was unhelpful. Would
                                    not recommend.</p>
                                <div class="flex items-center space-x-4 text-sm text-gray-500">
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">thumb_up</span>
                                        <span>2 helpful</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">reply</span>
                                        <span>Reply</span>
                                    </span>
                                    <span class="flex items-center space-x-1">
                                        <span class="material-icons text-sm">flag</span>
                                        <span>Report</span>
                                    </span>
                                </div>
                            </div>
                            <div class="flex-shrink-0 flex space-x-2">
                                <button
                                    class="p-2 text-gray-400 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors"
                                    title="Approve">
                                    <span class="material-icons">check</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors"
                                    title="Edit">
                                    <span class="material-icons">edit</span>
                                </button>
                                <button
                                    class="p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors"
                                    title="Hide">
                                    <span class="material-icons">visibility_off</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Pagination -->
                <div class="mt-8 flex items-center justify-between">
                    <div class="text-sm text-gray-700">
                        Showing <span class="font-medium">1</span> to <span class="font-medium">10</span> of <span
                            class="font-medium">156</span> results
                    </div>
                    <div class="flex items-center space-x-2">
                        <button
                            class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50"
                            disabled>
                            Previous
                        </button>
                        <button
                            class="px-3 py-2 text-sm font-medium text-white bg-[var(--madas-primary)] border border-transparent rounded-md hover:bg-[#1a3316]">
                            1
                        </button>
                        <button
                            class="px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                            2
                        </button>
                        <button
                            class="px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                            3
                        </button>
                        <button
                            class="px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50">
                            Next
                        </button>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Bulk Actions Modal -->
    <div id="bulkActionsModal" class="fixed inset-0 bg-black bg-opacity-50 hidden z-50">
        <div class="flex items-center justify-center min-h-screen p-4">
            <div class="bg-white rounded-lg shadow-xl max-w-md w-full">
                <div class="p-6">
                    <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-gray-900">Bulk Actions</h3>
                        <button onclick="closeBulkActionsModal()" class="text-gray-400 hover:text-gray-600">
                            <span class="material-icons">close</span>
                        </button>
                    </div>
                    <div class="space-y-3">
                        <button
                            class="w-full px-4 py-3 text-left bg-green-50 text-green-700 rounded-lg hover:bg-green-100 transition-colors">
                            <span class="material-icons inline-block mr-2">check</span>
                            Approve Selected Reviews
                        </button>
                        <button
                            class="w-full px-4 py-3 text-left bg-yellow-50 text-yellow-700 rounded-lg hover:bg-yellow-100 transition-colors">
                            <span class="material-icons inline-block mr-2">edit</span>
                            Edit Selected Reviews
                        </button>
                        <button
                            class="w-full px-4 py-3 text-left bg-gray-50 text-gray-700 rounded-lg hover:bg-gray-100 transition-colors">
                            <span class="material-icons inline-block mr-2">visibility_off</span>
                            Hide Selected Reviews
                        </button>
                        <button
                            class="w-full px-4 py-3 text-left bg-red-50 text-red-700 rounded-lg hover:bg-red-100 transition-colors">
                            <span class="material-icons inline-block mr-2">delete</span>
                            Delete Selected Reviews
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dark mode toggle functionality
        const darkToggle = document.getElementById('darkToggle');
        const darkIcon = document.getElementById('darkToggleIcon');

        function setDarkMode(on) {
            document.body.classList.toggle('dark-mode', on);
            localStorage.setItem('dark-mode', on ? '1' : '0');
            if (on) {
                darkIcon.innerHTML = '<path d="M21.64 13.64A9 9 0 1 1 10.36 2.36a7 7 0 1 0 11.28 11.28z"/>';
            } else {
                darkIcon.innerHTML = '<path d="M12 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1zm5.657 3.343a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414zM21 11a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1zm-2.929 7.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM12 20a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm-7.071-2.929a1 1 0 0 1-1.414 0l-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 0 1 0 1.414zM4 13a1 1 0 1 1 0-2H3a1 1 0 1 1 0 2h1zm2.343-7.657a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 4.222 6.05l.707-.707a1 1 0 0 1 1.414 0zM12 6a6 6 0 1 1 0 12A6 6 0 0 1 12 6z" />';
            }
        }

        darkToggle.addEventListener('click', () => {
            setDarkMode(!document.body.classList.contains('dark-mode'));
        });

        if (localStorage.getItem('dark-mode') === '1') {
            setDarkMode(true);
        }

        // Inventory Dropdown functionality
        document.addEventListener("DOMContentLoaded", () => {
            const inventoryToggle = document.getElementById("inventory-toggle");
            const inventorySubmenu = document.getElementById("inventory-submenu");
            const inventoryArrow = document.getElementById("inventory-arrow");

            if (inventoryToggle && inventorySubmenu && inventoryArrow) {
                inventoryToggle.addEventListener("click", (e) => {
                    e.preventDefault();
                    const isOpen = !inventorySubmenu.classList.contains("hidden");

                    if (isOpen) {
                        inventorySubmenu.classList.add("hidden");
                        inventoryArrow.style.transform = "rotate(0deg)";
                    } else {
                        inventorySubmenu.classList.remove("hidden");
                        inventoryArrow.style.transform = "rotate(180deg)";
                    }
                });
            }
        });

        // Modal functions
        function openBulkActionsModal() {
            document.getElementById('bulkActionsModal').classList.remove('hidden');
        }

        function closeBulkActionsModal() {
            document.getElementById('bulkActionsModal').classList.add('hidden');
        }

        // Close modal on outside click
        document.getElementById('bulkActionsModal').addEventListener('click', function (e) {
            if (e.target === this) {
                closeBulkActionsModal();
            }
        });

        // Review text expansion
        document.addEventListener('DOMContentLoaded', () => {
            const reviewTexts = document.querySelectorAll('.review-text');
            reviewTexts.forEach(text => {
                text.addEventListener('click', () => {
                    text.classList.toggle('review-expanded');
                });
            });
        });
    </script>
    <script>
        }

        // Close sidebar when clicking outside on mobile
        document.addEventListener('click', (e) => {
            if (window.innerWidth < 1024 &&
                !sidebar.contains(e.target) &&
                !toggleBtn.contains(e.target)) {
                sidebar.classList.add('-translate-x-full');
            }
        });
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-app.js";
        import { getFirestore, doc, getDoc, collection, addDoc, getDocs, deleteDoc, query, where, updateDoc } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-firestore.js";
        import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyC-ls1TrvSkrw71KqmB_kHYgPoj0H550a8",
            authDomain: "madas-store.firebaseapp.com",
            projectId: "madas-store",
            storageBucket: "madas-store.firebasestorage.app",
            messagingSenderId: "527071300010",
            appId: "1:527071300010:web:7470e2204065b4590583d3"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        let currentUserId = null;

        onAuthStateChanged(auth, async (user) => {
            if (!user) {
                window.location.href = "/login";
                return;
            }

            try {
                console.log('üîê User authenticated:', user.email);

                // ============================================
                // TENANT ISOLATION: Initialize Business Context
                // ============================================

                // Check for super admin users first (bypass business detection)
                const superAdminEmails = [
                    "hesainosama@gmail.com",
                    "test@example.com"
                ];

                if (superAdminEmails.includes(user.email)) {
                    console.log("üîë Super admin detected - granting full access");
                    window.currentUserRole = "super-admin";
                    window.currentBusinessId = "super-admin";
                    window.currentBusinessData = {
                        businessName: "Super Admin",
                        plan: { type: "enterprise", status: "active" }
                    };

                    // Set super admin permissions
                    const userData = {
                        email: user.email,
                        displayName: user.displayName || "Super Admin",
                        role: "super-admin",
                        approved: true,
                        permissions: {
                            home: ["view"],
                            orders: ["view", "search", "create", "edit"],
                            inventory: ["view", "edit"],
                            customers: ["view", "edit"],
                            employees: ["view", "edit"],
                            finance: ["view", "reports"],
                            analytics: ["view", "export"],
                            settings: ["view", "edit"],
                            admin: ["view", "manage_all_businesses"]
                        }
                    };

                    // Store user data
                    localStorage.setItem("madasUser", JSON.stringify(userData));

                    // Update UI
                    const username = userData.displayName || user.displayName || user.email.split("@")[0];
                    const userNameEl = document.getElementById("user-name");
                    const userEmailEl = document.getElementById("user-email");
                    const userInitialEl = document.getElementById("user-initial");

                    if (userNameEl) userNameEl.textContent = username;
                    if (userEmailEl) userEmailEl.textContent = user.email;
                    if (userInitialEl) userInitialEl.textContent = username.charAt(0).toUpperCase();

                    // Update business name and plan
                    const businessNameEl = document.getElementById("business-name");
                    if (businessNameEl) businessNameEl.textContent = "Super Admin";

                    const planBadge = document.getElementById("plan-badge");
                    if (planBadge) {
                        planBadge.textContent = "Enterprise Plan";
                        planBadge.className = "text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 hover:bg-purple-200 transition-colors cursor-pointer";
                    }

                    // Hide loading screen if it exists
                    const loadingScreen = document.getElementById('loadingScreen');
                    if (loadingScreen) loadingScreen.style.display = 'none';

                    return;
                }

                // Step 1: Find user's business (check if owner)
                const businessesQuery = query(collection(db, "businesses"), where("owner.userId", "==", user.uid));
                const businessSnapshot = await getDocs(businessesQuery);

                if (!businessSnapshot.empty) {
                    // User is a business owner
                    const businessDoc = businessSnapshot.docs[0];
                    window.currentBusinessId = businessDoc.id;
                    window.currentBusinessData = businessDoc.data();
                    window.currentUserRole = 'owner';

                    console.log('‚úÖ Business Owner:', window.currentBusinessData.businessName);
                    console.log('üè¢ Business ID:', window.currentBusinessId);
                    console.log('üìã Plan:', window.currentBusinessData.plan?.type);

                } else {
                    // Step 2: Check if user is staff member
                    const allBusinesses = await getDocs(collection(db, "businesses"));
                    let foundBusiness = false;

                    for (const businessDoc of allBusinesses.docs) {
                        const businessId = businessDoc.id;
                        const staffRef = doc(db, 'businesses', businessId, 'staff', user.uid);
                        const staffDoc = await getDoc(staffRef);

                        if (staffDoc.exists()) {
                            const staffData = staffDoc.data();
                            window.currentBusinessId = businessId;
                            window.currentBusinessData = businessDoc.data();
                            window.currentUserRole = staffData.role;
                            window.currentUserPermissions = staffData.permissions;

                            console.log('‚úÖ Staff Member:', window.currentBusinessData.businessName);
                            console.log('üè¢ Business ID:', window.currentBusinessId);
                            console.log('üë§ Role:', window.currentUserRole);

                            foundBusiness = true;
                            break;
                        }
                    }

                    if (!foundBusiness) {
                        console.warn("‚ùå User not associated with any business.");
                        console.log("üîç User email:", user.email);
                        console.log("üîç User UID:", user.uid);

                        // For now, create a temporary business context for testing
                        console.log("‚ö†Ô∏è Creating temporary business context for testing...");
                        window.currentBusinessId = "temp-business";
                        window.currentBusinessData = {
                            businessName: "Temporary Business",
                            plan: { type: "basic", status: "active" },
                            owner: { name: user.displayName || user.email.split("@")[0] }
                        };
                        window.currentUserRole = "owner";

                        // Set basic permissions
                        const userData = {
                            email: user.email,
                            displayName: user.displayName || user.email.split("@")[0],
                            role: "owner",
                            approved: true,
                            permissions: {
                                home: ["view"],
                                orders: ["view", "search", "create", "edit"],
                                inventory: ["view", "edit"],
                                customers: ["view", "edit"],
                                employees: ["view", "edit"],
                                finance: ["view", "reports"],
                                analytics: ["view", "export"],
                                settings: ["view", "edit"]
                            }
                        };

                        // Store user data
                        localStorage.setItem("madasUser", JSON.stringify(userData));

                        // Update UI
                        const username = userData.displayName || user.displayName || user.email.split("@")[0];
                        const userNameEl = document.getElementById("user-name");
                        const userEmailEl = document.getElementById("user-email");
                        const userInitialEl = document.getElementById("user-initial");

                        if (userNameEl) userNameEl.textContent = username;
                        if (userEmailEl) userEmailEl.textContent = user.email;
                        if (userInitialEl) userInitialEl.textContent = username.charAt(0).toUpperCase();

                        // Update business name and plan
                        const businessNameEl = document.getElementById("business-name");
                        if (businessNameEl) businessNameEl.textContent = "Temporary Business";

                        const planBadge = document.getElementById("plan-badge");
                        if (planBadge) {
                            planBadge.textContent = "Basic Plan";
                            planBadge.className = "text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-800 hover:bg-green-200 transition-colors cursor-pointer";
                        }

                        // Hide loading screen if it exists
                        const loadingScreen = document.getElementById('loadingScreen');
                        if (loadingScreen) loadingScreen.style.display = 'none';

                        return;
                    }
                }

                // Set user permissions based on role
                let userData = {
                    email: user.email,
                    displayName: user.displayName || window.currentBusinessData.owner?.name,
                    role: window.currentUserRole,
                    approved: true // All business users are approved by default
                };

                // Set permissions based on role
                if (window.currentUserRole === 'owner') {
                    userData.permissions = {
                        home: ["view"],
                        orders: ["view", "search", "create", "edit"],
                        inventory: ["view", "edit"],
                        customers: ["view", "edit"],
                        employees: ["view", "edit"],
                        finance: ["view", "reports"],
                        analytics: ["view", "export"],
                        settings: ["view", "edit"]
                    };
                } else if (window.currentUserRole === 'admin') {
                    userData.permissions = {
                        home: ["view"],
                        orders: ["view", "search", "create", "edit"],
                        inventory: ["view", "edit"],
                        customers: ["view", "edit"],
                        employees: ["view", "edit"],
                        finance: ["view", "reports"],
                        analytics: ["view", "export"],
                        settings: ["view", "edit"]
                    };
                } else {
                    // For staff members, use permissions from their staff document
                    userData.permissions = window.currentUserPermissions || {
                        home: ["view"]
                    };
                }

                ;
            }

                console.log('‚úÖ User data created:', {
                email: userData.email,
                role: userData.role,
                businessId: window.currentBusinessId,
                businessName: window.currentBusinessData?.businessName,
                approved: userData.approved
            });

            // Store user data
            localStorage.setItem("madasUser", JSON.stringify(userData));

            // Update UI
            currentUserId = user.uid;
            const username = userData.displayName || window.currentBusinessData?.owner?.name || user.displayName || user.email.split("@")[0];

            // Update user info if elements exist
            const userNameEl = document.getElementById("user-name");
            const userEmailEl = document.getElementById("user-email");
            const userInitialEl = document.getElementById("user-initial");

            if (userNameEl) userNameEl.textContent = username;
            if (userEmailEl) userEmailEl.textContent = user.email;
            if (userInitialEl) userInitialEl.textContent = username.charAt(0).toUpperCase();

            // Update business name and plan
            const businessName = window.currentBusinessData?.businessName || "DIGIX Admin";
            const planType = window.currentBusinessData?.plan?.type || "basic";
            const planStatus = window.currentBusinessData?.plan?.status || "active";

            const businessNameEl = document.getElementById("business-name");
            if (businessNameEl) businessNameEl.textContent = businessName;

            const planBadge = document.getElementById("plan-badge");
            if (planBadge) {
                planBadge.textContent = `${planType.charAt(0).toUpperCase() + planType.slice(1)} Plan`;

                // Set plan badge color based on plan type
                if (planType === 'enterprise') {
                    planBadge.className = "text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-800 hover:bg-purple-200 transition-colors cursor-pointer";
                } else if (planType === 'professional') {
                    planBadge.className = "text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800 hover:bg-blue-200 transition-colors cursor-pointer";
                } else {
                    planBadge.className = "text-xs px-2 py-0.5 rounded-full bg-green-100 text-green-800 hover:bg-green-200 transition-colors cursor-pointer";
                }

                // Add trial badge if in trial
                if (planStatus === 'trial') {
                    planBadge.textContent += ' (Trial)';
                }
            }

            // Hide loading screen if it exists
            const loadingScreen = document.getElementById('loadingScreen');
            if (loadingScreen) loadingScreen.style.display = 'none';

        } catch (error) {
            console.error("Permission check failed:", error);
            window.location.href = "/login";
        }
        });

        // Logout logic
        const logoutBtn = document.getElementById("logout-btn");
        if (logoutBtn) {
            logoutBtn.addEventListener("click", () => {
                auth.signOut().then(() => {
                    window.location.href = "/login";
                }).catch((error) => {
                    console.error("Logout error:", error);
                    window.location.href = "/login";
                });
            });
        }

        // Profile button
        const profileBtn = document.getElementById("profile-btn");
        if (profileBtn) {
            profileBtn.addEventListener("click", () => {
                window.location.href = "/pages/profile.html";
            });
        }

        // Finance Dropdown functionality
        const financeDropdownBtn = document.getElementById("finance-dropdown-btn");
        const financeDropdownMenu = document.getElementById("finance-dropdown-menu");
        const financeArrow = document.querySelector("#finance-dropdown-btn .dropdown-arrow");

        if (financeDropdownBtn && financeDropdownMenu) {
            financeDropdownBtn.addEventListener("click", (e) => {
                e.preventDefault();
                const isOpen = financeDropdownMenu.classList.contains("show");

                if (isOpen) {
                    financeDropdownMenu.classList.remove("show");
                    financeDropdownMenu.classList.add("hidden");
                    if (financeArrow) financeArrow.classList.remove("rotate");
                } else {
                    financeDropdownMenu.classList.remove("hidden");
                    financeDropdownMenu.classList.add("show");
                    if (financeArrow) financeArrow.classList.add("rotate");
                }
            });

            // Close dropdown when clicking outside
            document.addEventListener("click", (e) => {
                if (!financeDropdownBtn.contains(e.target) && !financeDropdownMenu.contains(e.target)) {
                    financeDropdownMenu.classList.remove("show");
                    financeDropdownMenu.classList.add("hidden");
                    if (financeArrow) financeArrow.classList.remove("rotate");
                }
            });
        }

        // E-commerce Dropdown functionality
        const ecommerceDropdownBtn = document.getElementById("ecommerce-dropdown-btn");
        const ecommerceDropdownMenu = document.getElementById("ecommerce-dropdown-menu");
        const ecommerceArrow = document.getElementById("ecommerce-arrow");

        if (ecommerceDropdownBtn && ecommerceDropdownMenu) {
            ecommerceDropdownBtn.addEventListener("click", (e) => {
                e.preventDefault();
                const isOpen = ecommerceDropdownMenu.classList.contains("show");

                if (isOpen) {
                    ecommerceDropdownMenu.classList.remove("show");
                    ecommerceDropdownMenu.classList.add("hidden");
                    if (ecommerceArrow) ecommerceArrow.classList.remove("rotate");
                } else {
                    ecommerceDropdownMenu.classList.remove("hidden");
                    ecommerceDropdownMenu.classList.add("show");
                    if (ecommerceArrow) ecommerceArrow.classList.add("rotate");
                }
            });
        }

        // Dark mode toggle logic
        const darkToggle = document.getElementById('darkToggle');
        const darkIcon = document.getElementById('darkToggleIcon');
        function setDarkMode(on) {
            document.body.classList.toggle('dark-mode', on);
            localStorage.setItem('dark-mode', on ? '1' : '0');
            if (on) {
                darkIcon.innerHTML = '<path d="M21.64 13.64A9 9 0 1 1 10.36 2.36a7 7 0 1 0 11.28 11.28z"/>';
            } else {
                darkIcon.innerHTML = '<path d="M12 2a1 1 0 0 1 1 1v1a1 1 0 1 1-2 0V3a1 1 0 0 1 1-1zm5.657 3.343a1 1 0 0 1 1.414 0l.707.707a1 1 0 1 1-1.414 1.414l-.707-.707a1 1 0 0 1 0-1.414zM21 11a1 1 0 1 1 0 2h-1a1 1 0 1 1 0-2h1zm-2.929 7.071a1 1 0 0 1 0 1.414l-.707.707a1 1 0 1 1-1.414-1.414l.707-.707a1 1 0 0 1 1.414 0zM12 20a1 1 0 0 1-1-1v-1a1 1 0 1 1 2 0v1a1 1 0 0 1-1 1zm-7.071-2.929a1 1 0 0 1-1.414 0l-.707-.707a1 1 0 1 1 1.414-1.414l.707.707a1 1 0 0 1 0 1.414zM4 13a1 1 0 1 1 0-2H3a1 1 0 1 1 0 2h1zm2.343-7.657a1 1 0 0 1 0 1.414l-.707.707A1 1 0 1 1 4.222 6.05l.707-.707a1 1 0 0 1 1.414 0zM12 6a6 6 0 1 1 0 12A6 6 0 0 1 12 6z" />';
            }
        }
        if (darkToggle) {
            darkToggle.addEventListener('click', () => {
                setDarkMode(!document.body.classList.contains('dark-mode'));
            });
        }
        if (localStorage.getItem('dark-mode') === '1') {
            setDarkMode(true);
        }

        // Inventory Dropdown functionality
        document.addEventListener("DOMContentLoaded", () => {
            const inventoryToggle = document.getElementById("inventory-toggle");
            const inventorySubmenu = document.getElementById("inventory-submenu");
            const inventoryArrow = document.getElementById("inventory-arrow");

            if (inventoryToggle && inventorySubmenu && inventoryArrow) {
                inventoryToggle.addEventListener("click", (e) => {
                    e.preventDefault();
                    const isOpen = !inventorySubmenu.classList.contains("hidden");

                    if (isOpen) {
                        inventorySubmenu.classList.add("hidden");
                        inventoryArrow.style.transform = "rotate(0deg)";
                    } else {
                        inventorySubmenu.classList.remove("hidden");
                        inventoryArrow.style.transform = "rotate(180deg)";
                    }
                });
            }
        });
    </script>
</body>
<script src="/js/sidebar.js"></script>

</html>